graph LR
    subgraph Agents["Agent Layer"]
        Orch2["Orchestrator"]
        Res["Research Agent"]
        Back["Backlog Agent"]
        Pri["Prioritization Agent"]
        Doc["Doc Agent"]
    end

    subgraph MCP["MCP Servers · Inside Daytona Sandbox"]
        SlackS["Slack MCP · stdio"]
        PMToolsS["PM Tools MCP · in-process"]
    end

    subgraph SlackTools["Slack Tools"]
        SS1["message_search"]
        SS2["get_channel"]
        SS3["get_thread"]
    end

    subgraph PMToolSet["PM Tools · Custom GraphQL"]
        LS1["list_linear_issues"]
        LS2["create_linear_issue"]
        LS3["update_linear_issue"]
        MS1["read_product_context"]
        MS2["save_insight"]
    end

    Res --> SlackS
    Doc --> SlackS
    Back --> PMToolsS
    Orch2 --> PMToolsS

    SlackS --> SS1
    SlackS --> SS2
    SlackS --> SS3

    PMToolsS --> LS1
    PMToolsS --> LS2
    PMToolsS --> LS3
    PMToolsS --> MS1
    PMToolsS --> MS2

    Pri -.->|No direct MCP · uses other agents output| Agents

    style Orch2 fill:#7c3aed,color:#fff
    style Res fill:#0ea5e9,color:#fff
    style Back fill:#0ea5e9,color:#fff
    style Pri fill:#7c3aed,color:#fff
    style Doc fill:#7c3aed,color:#fff
    style SlackS fill:#4a154b,color:#fff
    style PMToolsS fill:#5e6ad2,color:#fff
